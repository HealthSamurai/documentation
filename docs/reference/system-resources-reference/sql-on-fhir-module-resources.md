# SQL on FHIR Module Resources

## Overview

SQL on FHIR module includes the following resource types:

* ViewDefinition

## ViewDefinition

<table><thead><tr><th width="290">Path</th><th width="70">Card.</th><th width="150">Type</th><th>Description</th></tr></thead><tbody><tr><td>constant</td><td>0..*</td><td>BackboneElement</td><td>A constant is a value that is injected into a FHIRPath expression through the use of a FHIRPath<br>external constant with the same name.</td></tr><tr><td>constant.<strong>valueBase64Binary</strong></td><td>0..1</td><td>base64Binary</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueUri</strong></td><td>0..1</td><td>uri</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueString</strong></td><td>0..1</td><td>string</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueCode</strong></td><td>0..1</td><td>code</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valuePositiveInt</strong></td><td>0..1</td><td>positiveInt</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueCanonical</strong></td><td>0..1</td><td>canonical</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueDecimal</strong></td><td>0..1</td><td>decimal</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueDateTime</strong></td><td>0..1</td><td>dateTime</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>name</strong></td><td>1..1</td><td>string</td><td>Name of constant (referred to in FHIRPath as %[name])</td></tr><tr><td>constant.<strong>valueInstant</strong></td><td>0..1</td><td>instant</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>value</strong></td><td>1..1</td><td></td><td></td></tr><tr><td>constant.<strong>valueBoolean</strong></td><td>0..1</td><td>boolean</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueDate</strong></td><td>0..1</td><td>date</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueUnsignedInt</strong></td><td>0..1</td><td>unsignedInt</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueUuid</strong></td><td>0..1</td><td>uuid</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueTime</strong></td><td>0..1</td><td>time</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueId</strong></td><td>0..1</td><td>id</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueUrl</strong></td><td>0..1</td><td>url</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueOid</strong></td><td>0..1</td><td>oid</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>constant.<strong>valueInteger</strong></td><td>0..1</td><td>integer</td><td><p>The value that will be substituted in place of the constant reference. This<br>is done by including `%your_constant_name` in a FHIRPath expression, which effectively converts<br>the FHIR literal defined here to a FHIRPath literal used in the path expression.</p><p>Support for additional types may be added in the future.</p></td></tr><tr><td>contact</td><td>0..*</td><td>ContactDetail</td><td>Contact details for the publisher</td></tr><tr><td>copyright</td><td>0..1</td><td>markdown</td><td>Use and/or publishing restrictions</td></tr><tr><td>description</td><td>0..1</td><td>markdown</td><td>Natural language description of the view definition</td></tr><tr><td>experimental</td><td>0..1</td><td>boolean</td><td>For testing purposes, not real usage</td></tr><tr><td>fhirVersion</td><td>0..*</td><td>code</td><td>The FHIR version(s) for the FHIR resource. The value of this element is the<br>formal version of the specification, without the revision number, e.g.<br>[publication].[major].[minor].</td></tr><tr><td>identifier</td><td>0..1</td><td>Identifier</td><td>Additional identifier for the view definition</td></tr><tr><td>meta</td><td>0..1</td><td>Meta</td><td>Metadata about the view definition</td></tr><tr><td>name</td><td>0..1</td><td>string</td><td>Name of the view definition, must be in a database-friendly format.</td></tr><tr><td>publisher</td><td>0..1</td><td>string</td><td>Name of the publisher/steward (organization or individual)</td></tr><tr><td>resource</td><td>1..1</td><td>code</td><td>The FHIR resource that the view is based upon, e.g. 'Patient' or 'Observation'.</td></tr><tr><td>select</td><td>0..*</td><td>BackboneElement</td><td>The select structure defines the columns to be used in the resulting view. These are expressed<br>in the `column` structure below, or in nested `select`s for nested resources.</td></tr><tr><td>select.<strong>column</strong></td><td>0..*</td><td>BackboneElement</td><td>A column to be produced in the resulting table. The column is relative to the select structure<br>that contains it.</td></tr><tr><td>select.<strong>column</strong>.<strong>tag</strong></td><td>0..*</td><td>BackboneElement</td><td>Tags can be used to attach additional metadata to columns, such as implementation-specific<br>directives or database-specific type hints.</td></tr><tr><td>select.<strong>column</strong>.<strong>tag</strong>.<strong>name</strong></td><td>1..1</td><td>string</td><td>A name that identifies the meaning of the tag. A namespace should be used to scope the tag to<br>a particular context. For example, 'ansi/type' could be used to indicate the type that should<br>be used to represent the value within an ANSI SQL database.</td></tr><tr><td>select.<strong>column</strong>.<strong>tag</strong>.<strong>value</strong></td><td>1..1</td><td>string</td><td>Value of tag</td></tr><tr><td>select.<strong>column</strong>.<strong>name</strong></td><td>1..1</td><td>string</td><td>Name of the column produced in the output, must be in a database-friendly format. The column<br>names in the output must not have any duplicates.</td></tr><tr><td>select.<strong>column</strong>.<strong>path</strong></td><td>1..1</td><td>string</td><td>A FHIRPath expression that evaluates to the value that will be output in the column for each<br>resource. The input context is the collection of resources of the type specified in the resource<br>element. Constants defined in Reference({constant}) can be referenced as %[name].</td></tr><tr><td>select.<strong>column</strong>.<strong>type</strong></td><td>0..1</td><td>uri</td><td><p>A FHIR StructureDefinition URI for the column's type. Relative URIs are implicitly given<br>the 'http://hl7.org/fhir/StructureDefinition/' prefix. The URI may also use FHIR element ID notation to indicate<br>a backbone element within a structure. For instance, `Observation.referenceRange` may be specified to indicate<br>the returned type is that backbone element.</p><p>This field <em>must</em> be provided if a ViewDefinition returns a non-primitive type. Implementations should report an error<br>if the returned type does not match the type set here, or if a non-primitive type is returned but this field is unset.</p></td></tr><tr><td>select.<strong>column</strong>.<strong>collection</strong></td><td>0..1</td><td>boolean</td><td><p>Indicates whether the column may have multiple values. Defaults to `false` if unset.</p><p>ViewDefinitions must have this set to <code>true</code> if multiple values may be returned. Implementations SHALL<br>report an error if multiple values are produced when that is not the case.</p></td></tr><tr><td>select.<strong>column</strong>.<strong>description</strong></td><td>0..1</td><td>markdown</td><td>A human-readable description of the column.</td></tr><tr><td>select.<strong>select</strong></td><td>0..*</td><td></td><td>Nested select relative to a parent expression. If the parent `select` has a `forEach` or `forEachOrNull`, this child select will apply for each item in that expression.</td></tr><tr><td>select.<strong>forEach</strong></td><td>0..1</td><td>string</td><td>A FHIRPath expression to retrieve the parent element(s) used in the containing select, relative to the root resource or parent `select`,<br>if applicable. `forEach` will produce a row for each element selected in the expression. For example, using forEach on `address` in Patient will<br>generate a new row for each address, with columns defined in the corresponding `column` structure.</td></tr><tr><td>select.<strong>unionAll</strong></td><td>0..*</td><td></td><td>A `unionAll` combines the results of multiple selection structures. Each structure under the `unionAll` must produce the same column names<br>and types. The results from each nested selection will then have their own row.</td></tr><tr><td>select.<strong>forEachOrNull</strong></td><td>0..1</td><td>string</td><td>Same as forEach, but produces a single row with null values in the nested expression if the collection is empty. For example,<br>with a Patient resource, a `forEachOrNull` on address will produce a row for each patient even if there are no addresses; it will<br>simply set the address columns to `null`.</td></tr><tr><td>status</td><td>1..1</td><td>code</td><td>draft | active | retired | unknown</td></tr><tr><td>title</td><td>0..1</td><td>string</td><td>A optional human-readable description of the view.</td></tr><tr><td>url</td><td>0..1</td><td>uri</td><td>Canonical identifier for this view definition, represented as a URI (globally unique)</td></tr><tr><td>useContext</td><td>0..*</td><td>UsageContext</td><td>The context that the content is intended to support</td></tr><tr><td>where</td><td>0..*</td><td>BackboneElement</td><td>A series of zero or more FHIRPath constraints to filter resources for the view. Every constraint<br>must evaluate to true for the resource to be included in the view.</td></tr><tr><td>where.<strong>path</strong></td><td>1..1</td><td>string</td><td>A FHIRPath expression that defines a filter that must evaluate to true for a resource to be<br>included in the output. The input context is the collection of resources of the type specified in<br>the resource element. Constants defined in Reference({constant}) can be referenced as %[name].</td></tr><tr><td>where.<strong>description</strong></td><td>0..1</td><td>string</td><td>A human-readable description of the above where constraint.</td></tr></tbody></table>
