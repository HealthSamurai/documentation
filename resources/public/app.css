@import "tailwindcss";
@source "../docs/**/*.md";
@source "../src/**/*.clj";

/* Dark mode configuration */
@custom-variant dark (&:where(.dark, .dark *));

/* Tailwind v4 Theme Configuration */
@theme {
  /* ==========================================================================
     SEMANTIC COLOR SYSTEM (Material Design Inspired)
     See: adr/002-tailwind-theme.md
     Inspired by: https://www.penguinui.com/theme
     ========================================================================== */

  /* Surface Colors (Backgrounds) */
  --color-surface: #FFFFFF;
  /* Pure white - main background
   * Used in: Page backgrounds, card backgrounds, modal backgrounds
   * Utilities: bg-surface
   */

  --color-surface-alt: #F8F9FA;
  /* Light gray background - alternative surface
   * Used in: Card backgrounds (with gradients), Zulip banner, hover states
   * Locations: 15+ places - landing_hero.clj, examples.clj, tags.clj
   * Utilities: bg-surface-alt
   * Note: Often used in gradients: bg-gradient-to-b from-white to-surface-alt
   */

  --color-surface-subtle: #FDFDFE;
  /* Nearly white - NEW FROM DESIGNER (was #FBF9F9)
   * Change: Even closer to white, cooler tone
   * Used in: Code block backgrounds, inline code backgrounds
   * Locations: app.css (@apply rules for article code blocks)
   * Utilities: bg-surface-subtle
   */

  --color-surface-hover: #F3F5F9;
  /* Hover state background - cooler tone
   * Used in: Table row hovers, navigation item hovers, dropdown hovers
   * Locations: app.css (table hover), main_navigation.clj, summary.clj
   * Utilities: hover:bg-surface-hover
   */

  --color-surface-result-hover: #F0F0F0;
  /* Search result hover background - FROM FIGMA
   * Medium gray for search result item hover state
   * Used in: Search result items on hover
   * Locations: meilisearch.clj (result items)
   * Utilities: hover:bg-surface-result-hover
   */

  --color-surface-nav-hover: #F6F7F9;
  /* Left navigation hover background - FROM FIGMA
   * Light gray for navigation item hover state
   * Used in: Left navigation items on hover
   * Locations: left_navigation.clj, summary.clj
   * Utilities: hover:bg-surface-nav-hover
   */

  --color-surface-nav-active: #FCF8F7;
  /* Left navigation active background - FROM FIGMA
   * Light warm gray for active navigation item
   * Used in: Active navigation items
   * Locations: summary.clj
   * Utilities: active:hover:bg-surface-nav-active
   */

  --color-breadcrumb-bg: #F4F5F6;
  /* Breadcrumb item background - FROM FIGMA
   * Light gray background for breadcrumb items
   * Used in: Breadcrumb items
   * Locations: breadcrumb.clj
   * Utilities: bg-breadcrumb-bg
   */

  --color-breadcrumb-separator: #BBBBBB;
  /* Breadcrumb separator color - FROM FIGMA
   * Gray color for "/" separator between breadcrumb items
   * Used in: Breadcrumb separators
   * Locations: breadcrumb.clj
   * Utilities: text-breadcrumb-separator
   */

  --color-list-marker: #D1D5DB;
  /* List bullet point color - FROM FIGMA
   * Light gray color for ul bullet points (•)
   * Used in: Article list bullets
   * Locations: app.css (article ul>li::before)
   * Utilities: Used via var() in custom CSS
   */

  --color-tag-bg: #EEF1F4;
  /* Tag background color - FROM FIGMA
   * Light gray background for tags in landing cards
   * Used in: Landing page card tags
   * Locations: tags.clj (landing cards)
   * Utilities: bg-tag-bg
   */

  --color-tag-language-bg: #717684;
  /* Language tag background color
   * Dark gray background for language/code tags
   * Used in: Language tags (e.g., Java, Python)
   * Locations: tags.clj (language variant)
   * Utilities: bg-tag-language-bg
   */

  --color-tag-language-hover: #5a5d68;
  /* Language tag hover background color
   * Darker gray for language tag hover state
   * Used in: Language tag hover states
   * Locations: tags.clj (language variant hover)
   * Utilities: hover:bg-tag-language-hover
   */

  /* On-Surface Colors (Text on Backgrounds) */
  --color-on-surface: #717684;
  /* Main body text - NEW FROM DESIGNER (was #1F1C1C)
   * Change: Lighter, more gray (from near-black to medium gray)
   * Used in: All body text, main content (50+ places)
   * Locations: headers.clj, landing_hero.clj, examples.clj, main_content.clj
   * Utilities: text-on-surface
   * NOTE: This is the most impactful change - affects readability across entire app
   */

  --color-on-surface-strong: #1F1C1C;
  /* Headings and emphasis - FROM FIGMA --color-grey-12 (was #353B50)
   * Change: Much darker, almost black for better heading contrast
   * Used in: All headings H1-H6, card titles, emphasis text, navigation items (85+ places)
   * Locations: headers.clj, landing_hero.clj, examples.clj, layout.clj, navigation
   * Utilities: text-on-surface-strong
   */

  --color-on-surface-secondary: #353b50;
  /* Secondary text for card descriptions - FROM FIGMA
   * Blue-gray color for description text, darker than on-surface but lighter than on-surface-strong
   * Used in: Landing page card descriptions (14 places)
   * Locations: landing_hero.clj (Getting Started card, See Also cards, Main Concepts cards, Zulip section)
   * Utilities: text-on-surface-secondary
   */

  --color-on-surface-muted: #717684;
  /* Muted/helper text - NEW FROM DESIGNER (was #987E78)
   * Change: Cooler gray, now same as on-surface (simplifies hierarchy)
   * Used in: Labels, helper text, "Previous/Next" labels, breadcrumb chevrons (15+ places)
   * Locations: main_content.clj, breadcrumb.clj, meilisearch.clj
   * Utilities: text-on-surface-muted
   * NOTE: Designer intentionally made this same as on-surface
   */

  --color-on-surface-placeholder: #7E8291;
  /* Input placeholders, disabled states
   * Used in: Search input placeholders, disabled text, kbd shortcuts
   * Locations: main_navigation.clj (search), tags.clj (kbd shortcuts)
   * Utilities: text-on-surface-placeholder, placeholder:text-on-surface-placeholder
   */

  --color-text-muted: #858894;
  /* Muted descriptive text - FROM FIGMA
   * Used in: Search result content descriptions, secondary informational text
   * Locations: meilisearch.clj (content text in search results)
   * Utilities: text-text-muted
   */

  /* Button Hover Colors */
  --color-button-hover-text: #1d2331;
  /* Button text color on hover
   * Dark blue-gray for button hover state
   * Used in: Send feedback button, Login button hover
   * Utilities: hover:text-button-hover-text
   */

  --color-button-hover-bg: #f9f9f9;
  /* Button background color on hover
   * Very light gray for button hover state
   * Used in: Send feedback button, Login button hover
   * Utilities: hover:bg-button-hover-bg
   */

  /* Outline Colors (Borders) */
  --color-outline: #E7E9EF;
  /* Default border color - FROM HARDCODES
   * Used in: Card borders, input borders, default UI element borders (15+ places)
   * Locations: landing_hero.clj (cards), examples.clj, main_navigation.clj (search input)
   * Utilities: border-outline
   */

  --color-outline-hover: #DADDE7;
  /* Border hover state - FROM HARDCODES
   * Used in: Interactive element border hovers (cards, buttons) (3+ places)
   * Locations: landing_hero.clj, examples.clj
   * Utilities: hover:border-outline-hover
   */

  --color-outline-input-focus: #98A1AE;
  /* Input border focus - FROM FIGMA
   * Medium blue-gray for search input border when typing
   * Used in: Search input focus state
   * Locations: main_navigation.clj (search input)
   * Utilities: focus-within:border-outline-input-focus
   */

  --color-outline-subtle: #EBECEE;
  /* Subtle borders - NEW FROM DESIGNER (was #FAF7F6)
   * Change: From warm off-white to cool gray
   * Used in: Table header backgrounds, tag backgrounds
   * Locations: app.css (table thead), meilisearch.clj (tags)
   * Utilities: border-outline-subtle, bg-outline-subtle (sometimes used as background)
   */

  --color-outline-strong: #EBE4E2;
  /* Strong/emphasized borders
   * Used in: Emphasized borders, structural dividers, code block borders
   * Locations: app.css (code blocks, tables), layout.clj (footer border)
   * Utilities: border-outline-strong
   */

  /* Brand Colors (Primary Actions) */
  --color-brand: #D95640;
  /* Coral/red brand color
   * Used in: Primary buttons, active links, hover states for navigation (20+ places)
   * Locations: landing_hero.clj, left_navigation.clj, breadcrumb.clj
   * Utilities: bg-brand, text-brand, border-brand
   */

  --color-on-brand: #FFFFFF;
  /* Text on brand color (white on buttons)
   * Used in: Button text, text on brand backgrounds
   * Utilities: text-on-brand
   */

  --color-brand-hover: #CA4833;
  /* Darker brand color for hover states
   * Used in: Button hovers, interactive element hovers (5+ places)
   * Locations: landing_hero.clj, main_navigation.clj
   * Utilities: hover:bg-brand-hover
   */

  --color-brand-light: #FFF8F6;
  /* Very light brand tint for subtle backgrounds
   * Used in: Active navigation item backgrounds
   * Locations: summary.clj (active:hover:bg state)
   * Utilities: bg-brand-light
   */

  /* Warning Colors (Highlighting) */
  --color-warning-bg: #FFF4EC;
  /* Warning/highlight background (light orange)
   * Used in: Search result highlighting in Meilisearch
   * Locations: meilisearch.clj (mark highlighting), app.css (mark styling)
   * Utilities: bg-warning-bg
   * NOTE: Only warning color we actually use
   */

  --color-highlight: #F8D9D4;
  /* Search highlight background - FROM FIGMA
   * Soft pink/peach for highlighted search terms in search results
   * Used in: Search result text highlighting (mark tags)
   * Locations: meilisearch.clj (highlightPreTag in search queries)
   * Utilities: bg-highlight
   */

  --color-outline-tree: #b3bac0;
  /* Tree structure border - gray color for FHIR structure dotted lines
   * Used in: FHIR structure table tree lines
   * Utilities: border-outline-tree
   */

  /* Module card colors */
  --color-module-bg-end: #FFF0F0;
  /* Light pink background end for module cards gradient
   * Used in: Module cards background gradient
   * Locations: landing_hero.clj (modules section)
   */

  --color-module-border: #FDDFDD;
  /* Module card top border color
   * Light pink border for module cards
   * Used in: Module cards border-top
   * Locations: landing_hero.clj (modules section)
   * Utilities: border-module-border
   */

  --color-module-label: #EF4136;
  /* Module card label text color - bright red/orange
   * Used in: Module card category labels (MPI, ePrescription, Forms)
   * Locations: landing_hero.clj (modules section)
   * Utilities: text-module-label
   */

  /* Color System - Semantic Colors */
  /* Info (blue-based) */
  --color-info-2: rgb(239, 246, 255);
  --color-info-3: rgb(219, 234, 254);
  --color-info-9: rgb(59, 130, 246);
  --color-info-12: rgb(30, 58, 138);

  /* Success (emerald-based) */
  --color-success-2: rgb(209, 250, 229);
  --color-success-3: rgb(167, 243, 208);
  --color-success-9: rgb(16, 185, 129);
  --color-success-12: rgb(4, 120, 87);

  /* Warning (amber-based) */
  --color-warning-2: rgb(255, 244, 236);
  --color-warning-3: rgb(253, 230, 138);
  --color-warning-9: rgb(245, 158, 11);
  --color-warning-12: rgb(146, 64, 14);

  /* Danger (red-based) */
  --color-danger-2: rgb(254, 226, 226);
  --color-danger-3: rgb(252, 165, 165);
  --color-danger-9: rgb(239, 68, 68);
  --color-danger-12: rgb(153, 27, 27);

  /* Header colors */
  --color-header-bg: rgba(255, 255, 255, 0.95);
  --color-header-border: rgba(31, 28, 28, 0.08);
  --color-header-text: rgb(31, 28, 28);

  /* Font Families */
  --font-sans: Inter, "Inter Fallback", system-ui, arial;
  --font-mono: "IBM Plex Mono", monospace;
  --font-code: Menlo, "JetBrains Mono", ui-monospace, Monaco, "Cascadia Mono",
    "Segoe UI Mono", "Roboto Mono", "Oxygen Mono", "Ubuntu Monospace",
    "Source Code Pro", "Fira Mono", "Droid Sans Mono", "Courier New", monospace;
  --font-content: Inter, "Inter Fallback", system-ui, arial;

  /* Code Styles */
  --code-font-size: 13px;
  --code-line-height: 20px;
  --code-font-weight: 400;
  --code-shadow: 0px 1px 0px 0px #FFFFFF;
  --color-code-inline-border: #F6F1F0;

  /* Font Sizes - Tailwind v4 syntax (Scalar/GitBook compatible) */
  --text-micro: 0.75rem;
  /* 12px - scalar-micro */
  --text-micro--line-height: 1rem;
  /* 16px - scalar-line-height-5 */

  --text-mini: 0.8125rem;
  /* 13px - scalar-mini */
  --text-mini--line-height: 1.125rem;
  /* 18px - scalar-line-height-4 */

  --text-small: 0.875rem;
  /* 14px - scalar-small */
  --text-small--line-height: 1.25rem;
  /* 20px - scalar-line-height-3 */

  --text-base: 1rem;
  /* 16px - scalar-paragraph */
  --text-base--line-height: 1.5rem;
  /* 24px - scalar-line-height-2 */

  --text-lg: 1.125rem;
  --text-lg--line-height: 1.75rem;

  --text-xl: 1.25rem;
  /* 20px - scalar-heading-2/3 */
  --text-xl--line-height: 2rem;
  /* 32px - scalar-line-height-1 */

  --text-2xl: 1.3125rem;
  /* 21px - scalar-font-size-1 */
  --text-2xl--line-height: 2rem;
  /* 32px */

  --text-3xl: 1.5rem;
  /* 24px - scalar-heading-1 */
  --text-3xl--line-height: 2rem;
  /* 32px */

  --text-4xl: 1.875rem;
  /* 30px - keep for compatibility */
  --text-4xl--line-height: 2.25rem;
  /* 36px */

  --text-5xl: 2.25rem;
  /* 36px - keep for compatibility */
  --text-5xl--line-height: 2.5rem;
  /* 40px */

  /* Shadows */
  --shadow-aidbox: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-aidbox-md: 0 4px 6px -1px rgb(0 0 0 / 0.1),
    0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-aidbox-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1),
    0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-header: rgba(31, 28, 28, 0.08) 0px 1px 0px 0px;
  --shadow-dropdown: 0px 21px 46px 0px rgba(0, 0, 0, 0.1),
    0px 84px 84px 0px rgba(0, 0, 0, 0.09),
    0px 190px 114px 0px rgba(0, 0, 0, 0.05),
    0px 337px 135px 0px rgba(0, 0, 0, 0.01),
    0px 527px 148px 0px rgba(0, 0, 0, 0);
  /* Search dropdown shadow - FROM FIGMA
   * Multi-layer shadow for search dropdown (5 layers)
   * Locations: meilisearch.clj
   */

  /* Border Radius */
  --radius-aidbox: 3px;
  --radius-aidbox-lg: 6px;
  --radius-aidbox-xl: 8px;

  /* Z-Index */
  --z-header: 30;
  --z-sidebar: 20;
  --z-overlay: 40;
}

/* ==========================================================================
   DARK THEME COLOR OVERRIDES
   ========================================================================== */
.dark {
  /* Surface Colors (Backgrounds) */
  --color-surface: #1a1a1a;
  --color-surface-alt: #252525;
  --color-surface-subtle: #202020;
  --color-surface-hover: #2a2a2a;
  --color-surface-result-hover: #2f2f2f;
  --color-surface-nav-hover: #272727;
  --color-surface-nav-active: #2c2420;
  --color-breadcrumb-bg: #2b2c2d;
  --color-list-marker: #666666;
  --color-tag-bg: #2e3135;
  --color-tag-language-bg: #b8b8b8;
  --color-tag-language-hover: #d0d0d0;

  /* On-Surface Colors (Text) */
  --color-on-surface: #e5e5e5;
  --color-on-surface-strong: #f1f1f1;
  --color-on-surface-secondary: #b8b8b8;
  --color-on-surface-muted: #999999;
  --color-on-surface-placeholder: #7a7a7a;
  --color-text-muted: #888888;

  /* Button Hover Colors */
  --color-button-hover-text: #e0e0e0;
  --color-button-hover-bg: #2a2a2a;

  /* Outline Colors (Borders) */
  --color-outline: #333333;
  --color-outline-hover: #444444;
  --color-outline-input-focus: #666666;
  --color-outline-subtle: #2a2a2a;
  --color-outline-strong: #3a3a3a;

  /* Brand Colors */
  --color-brand: #E66B55;
  --color-on-brand: #FFFFFF;
  --color-brand-hover: #D95640;
  --color-brand-light: #2a1f1e;

  /* Warning Colors */
  --color-warning-bg: #2d2419;
  --color-highlight: #4a2d28;

  /* Tree structure */
  --color-outline-tree: #555555;

  /* Module card colors */
  --color-module-bg-end: #2a1f1f;
  --color-module-border: #442d2b;
  --color-module-label: #EF6B5F;

  /* Semantic Colors */
  --color-info-2: rgb(30, 41, 59);
  --color-info-3: rgb(51, 65, 85);
  --color-info-9: rgb(96, 165, 250);
  --color-info-12: rgb(147, 197, 253);

  --color-success-2: rgb(20, 83, 45);
  --color-success-3: rgb(22, 101, 52);
  --color-success-9: rgb(52, 211, 153);
  --color-success-12: rgb(110, 231, 183);

  --color-warning-2: rgb(69, 26, 3);
  --color-warning-3: rgb(120, 53, 15);
  --color-warning-9: rgb(251, 191, 36);
  --color-warning-12: rgb(252, 211, 77);

  --color-danger-2: rgb(127, 29, 29);
  --color-danger-3: rgb(153, 27, 27);
  --color-danger-9: rgb(248, 113, 113);
  --color-danger-12: rgb(252, 165, 165);

  /* Header colors */
  --color-header-bg: rgba(26, 26, 26, 0.95);
  --color-header-border: rgba(255, 255, 255, 0.08);
  --color-header-text: rgb(255, 255, 255);

  /* Code Styles */
  --code-shadow: 0px 1px 0px 0px #000000;
  --color-code-inline-border: #333333;

  /* Force dark scrollbars for code blocks */
  & pre,
  & .code-gitbook {
    color-scheme: dark;
  }

  /* Module card gradient */
  & .module-card-gradient {
    background: linear-gradient(90deg, var(--color-surface) 44.8%, var(--color-module-bg-end) 161.49%);
  }

  & .module-card-gradient:hover {
    background: var(--color-surface);
  }

  /* Hero ellipse overlay */
  & .hero-ellipse-overlay {
    background: radial-gradient(ellipse at center, rgba(26, 26, 26, 0.8) 0%, rgba(26, 26, 26, 0.4) 40%, transparent 70%);
  }

  /* Copy code button */
  & .copy-code-btn:hover,
  & .copy-code-btn:focus,
  & .copy-code-btn:active {
    @apply bg-surface-hover text-on-surface-muted;
    outline: none;
  }

  /* Theme toggle dark mode */
  & .theme-toggle button {
    color: rgb(140, 155, 165);
  }

  & .theme-toggle button:hover {
    color: rgb(220, 230, 235);
  }

  & .theme-toggle button.active {
    background: rgb(45, 55, 65);
    color: rgb(220, 230, 235);
  }
}

html {
  line-height: 1.625;
  background-color: var(--color-surface);
}

body {
  background-color: var(--color-surface);
  color: var(--color-on-surface);
}

/* Main content background */
main#content {
  background-color: var(--color-surface);
}

article {
  background-color: var(--color-surface);
  color: var(--color-on-surface);
}

/* ================================================
   Component Classes
   ================================================ */

/* Module card gradient background */
.module-card-gradient {
  background: linear-gradient(90deg, #FFFFFF 44.8%, var(--color-module-bg-end) 161.49%);
}

.module-card-gradient:hover {
  background: var(--color-surface);
}

/* Merge adjacent highlight marks - remove inner border-radius */
mark + mark {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

mark:has(+ mark) {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

/* Hero Ellipse Overlay */
.hero-ellipse-overlay {
  position: absolute;
  width: 900px;
  height: 600px;
  background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.4) 40%, transparent 70%);
  pointer-events: none;
  top: 40%;
  left: 10%;
  transform: translate(-50%, -50%);
  z-index: 5;
  mix-blend-mode: screen;
}

@media (max-width: 1024px) {
  .hero-ellipse-overlay {
    width: 600px;
    height: 400px;
    left: 40%;
  }
}

@media (max-width: 768px) {
  .hero-ellipse-overlay {
    width: 500px;
    height: 350px;
    left: 50%;
  }
}
/* Overlay for mobile menu */
.mobile-menu-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 30; /* Below header (z-50) but above navigation (z-40) */
}

.mobile-menu-overlay.active {
  display: block;
}

/* ================================================
   Content Container Styles (#content)
   ================================================ */

/* Typography - Basic elements */
article ul {
  @apply ml-8;
  list-style: none;
}

article ul>li {
  @apply mt-2;
  position: relative;
}

/* Custom bullet styling to match the example */
article ul>li::before {
  content: "•";
  color: var(--color-list-marker);
  font-family: Arial, sans-serif;
  font-size: min(1.5em, 24px);
  line-height: 1;
  position: absolute;
  left: -1.5rem;
  top: 0;
}

/* Add margin-bottom to p tags that are not inside li */
article p:not(li p) {
  @apply my-2;
}

article strong {
  @apply font-bold;
}

article .card strong {
  @apply group-hover:font-bold group-hover:text-on-surface-strong;
}

/* Special mark styling */
article mark[style*="background-color:blue"] {
  background-color: #dbeafe !important;
  color: #1e40af !important;
}

/* Tables */
article table {
  @apply min-w-full bg-surface my-6;
}

/* Remove margin from tables inside details elements */
article details table {
  @apply my-0;
}

article thead {
  @apply border-b border-outline bg-surface-alt;
}

article th {
  @apply px-4 py-2 text-sm text-on-surface-secondary font-medium text-left;
}

article tbody {
  @apply divide-y divide-outline;
}

article tr {
  @apply hover:bg-surface-hover transition-colors duration-200;
}

article td {
  @apply px-4 py-1.5 text-sm leading-relaxed border-r border-outline last:border-r-0 text-on-surface-secondary text-left;
}

/* Links inside tables (HTML tables with <a> tags) */
article table a {
  @apply text-brand underline underline-offset-2 hover:text-on-surface-strong hover:decoration-brand transition-all duration-200;
  text-decoration-thickness: max(0.07em, 1px);
}

/* Figure and Images */
article figure {
  @apply flex flex-col items-center justify-center my-8;
}

article figure img {
  @apply max-w-full h-auto mx-auto rounded-lg;
}

article figure figcaption {
  @apply mt-3 text-sm text-center text-on-surface-muted;
}

article pre+pre {
  @apply mt-4;
}

/* Inline code (not in pre blocks) */
article code:not(pre code) {
  @apply py-[1px]! px-1.5! min-w-[1.625rem] bg-surface-subtle text-on-surface-secondary rounded inline break-words;
  font-family: var(--font-code);
  font-size: var(--text-small);
  line-height: var(--code-line-height);
  font-weight: var(--code-font-weight);
  vertical-align: middle;
  box-shadow: 0px 0px 0px 1px var(--color-code-inline-border) inset;
  overflow-wrap: break-word !important;
  word-break: break-word !important;
  white-space: pre-wrap !important;
  box-decoration-break: clone;
}


article pre {
  @apply my-4!;
}


/* Default code block styles - prevent flash of unstyled content */
article pre code {
  @apply block px-4 py-2 border border-outline bg-surface-subtle text-on-surface-strong rounded-lg overflow-x-auto max-w-full min-w-0 relative;
  font-size: var(--code-font-size);
  line-height: var(--code-line-height);
  font-weight: var(--code-font-weight);
  box-shadow: var(--code-shadow);
  white-space: pre;
  box-sizing: border-box;
  contain: layout inline-size;
}

/* Override Prism's default styles while keeping our theme */
article pre[class*="language-"] {
  background-color: var(--color-surface-subtle) !important;
  padding: 0;
}

/* Remove background from inline code with Prism classes */
article :not(pre) > code[class*="language-"] {
  background: transparent !important;
}

/* Override Prism.js styles to use our theme variables */
article code[class*="language-"],
article pre[class*="language-"] code {
  font-family: var(--font-code) !important;
  font-size: var(--code-font-size) !important;
  line-height: var(--code-line-height) !important;
  font-weight: var(--code-font-weight) !important;
  box-shadow: var(--code-shadow) !important;
}

article pre[class*="language-"] {
  background-color: var(--color-surface-subtle) !important;
}

article code[class*="language-"] {
  background: transparent !important;
}

article .code-gitbook pre {
  @apply my-0! border-t-0!;
}

article .code-gitbook pre code {
  @apply border! border-0! border-indigo-500!;
}

/* Heading anchor offset for fixed navigation */
h2[id], h3[id] {
  scroll-margin-top: 80px;
}

/* Details and Summary - Modern expandable design */
article details {
  @apply w-full bg-surface border border-outline print:break-inside-avoid;
  margin-top: 0;
  border-bottom-width: 0;
}

/* First details element gets top rounded corners and top margin */
article details:first-of-type {
  @apply mt-5 rounded-t-lg;
}

/* Details elements that don't have another details immediately before them get top margin and rounded top */
article details:not(:has(+ details)) + details,
article *:not(details) + details {
  @apply mt-5 rounded-t-lg;
}

/* Last details or details not followed by another details get bottom border and rounded bottom */
article details:last-of-type,
article details:not(:has(+ details)):not(:last-child) {
  @apply mb-5 rounded-b-lg;
  border-bottom-width: 1px;
}

/* Summary styling */
article summary {
  @apply px-4 pr-10 py-4 text-on-surface;
  cursor: pointer;
  position: relative;
  list-style: none;
  user-select: none;
  transition: color 200ms;
  /* Use flexbox for perfect alignment */
  display: flex;
  align-items: center;
}

article summary:hover {
  @apply text-on-surface-strong;
}

/* Hide default marker */
article summary::-webkit-details-marker {
  display: none;
}

article summary::marker {
  display: none;
}

/* Chevron icon */
article summary::before {
  content: "";
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  margin-right: 0.5rem;
  background-color: currentColor;
  transition: transform 200ms;
  /* Simple chevron using CSS borders */
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='9 18 15 12 9 6'%3E%3C/polyline%3E%3C/svg%3E");
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='9 18 15 12 9 6'%3E%3C/polyline%3E%3C/svg%3E");
  mask-repeat: no-repeat;
  -webkit-mask-repeat: no-repeat;
  mask-position: center;
  -webkit-mask-position: center;
  mask-size: contain;
  -webkit-mask-size: contain;
}

/* Rotate chevron when open */
article details[open] summary::before {
  transform: rotate(90deg);
}

/* Content inside details */
article details > *:not(summary) {
  @apply px-10 py-4;
}

article details > *:not(summary):last-child {
  @apply pb-5;
}

/* Hover and open state */
article details:hover summary {
  @apply text-on-surface-strong;
}

article details[open] summary {
  @apply text-on-surface-strong;
}

/* Hint/Admonition styles */
article .hint img {
  max-width: min(300px, 100%);
  height: auto;
}

article .hint p:first-child {
  @apply mt-0;
}

article .hint p:last-child {
  @apply mb-0;
}

article .hint p {
  @apply my-2 text-sm;
}

/* ================================================
   Navigation Styles (#navigation)
   ================================================ */

/* Base state - always have padding to prevent layout shift */
#navigation a {
  @apply py-1 rounded flex items-center min-h-9;
}

#navigation .nav-summary {
  @apply py-1 rounded min-h-9;
}

/* Remove padding from links inside nav-summary to avoid double padding */
#navigation .nav-summary a {
  @apply py-0 min-h-0;
}

/* Hover state for navigation links */
#navigation a:hover,
#navigation .nav-summary:hover {
  @apply bg-surface-nav-active text-on-surface-secondary font-normal;
}

/* Active state for navigation links */
#navigation a.active,
#navigation .nav-summary:has(a.active) {
  @apply bg-surface-nav-active text-on-surface-secondary font-medium;
}

/* Apply left border only to nested pages (not first level) */
#navigation .nav-item a.active:not(.nav-summary a) {
  @apply border-l-1 border-brand rounded-l-none;
}

/* Remove left border for nav-summary elements (section headers) */
#navigation .nav-summary a.active {
  border-left: none !important;
}

/* Remove left border for first-level nav-item nav-summary elements */
#navigation > div > .nav-item > .nav-summary a.active {
  border-left: none !important;
}

/* Add left border for nested nav-summary elements */
#navigation .nav-item .nav-item .nav-summary a.active {
  @apply border-l-1 border-brand rounded-l-none;
}

/* TOC container - active state from Figma */
#toc-container a.active {
  @apply text-on-surface-secondary font-medium border-l-1 border-list-marker;
}


/* ================================================
   Mobile and Tablet Responsive Styles
   ================================================ */
/* Hide navigation on medium screens (tablets and half-screen desktops) */
@media (min-width: 768px) and (max-width: 1023px) {
  #navigation {
    display: none !important;
  }
}

/* Mobile navigation overlay styles - applies to both mobile and tablet */
#navigation.mobile-open {
  display: block !important;
  position: fixed !important;
  top: 4rem !important;
  left: 0 !important;
  width: 100% !important;
  height: calc(100vh - 4rem)!important;
  background: var(--color-surface) !important;
  z-index: 40 !important;
  overflow-y: auto !important;
  padding: 1rem !important;
  padding-bottom: 4rem !important; /* Extra padding to ensure last item is visible */
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1) !important;
  border-radius: 0 !important;
  border: none !important;
}

@media (max-width: 1023px) {

  /* Header - make fully opaque on mobile and tablet to prevent gray overlay showing through */
  nav[aria-label="Main site menu"] {
    background: var(--color-surface) !important;
  }
}

@media (max-width: 767px) {

  /* Navigation */
  #navigation {
    display: none!important;
  }

  .article__content {
    max-width: 100vw !important;
    overflow: clip !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  /* Content optimization */
  /* Content container */
  #content {
    max-width: 100vw !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    box-sizing: border-box !important;
  }

  #content>* {
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  article p,
  article div,
  article blockquote,
  article table {
    max-width: 100% !important;
    box-sizing: border-box !important;
    overflow: clip !important;
    overflow-wrap: break-word !important;
    hyphens: none !important;
  }

  /* Force all text to wrap - simplified */
  article * {
    overflow-wrap: break-word !important;
    hyphens: none !important;
  }

  /* Tables scrollable on mobile */
  article table {
    display: block !important;
    overflow-x: auto !important;
  }

  /* Allow code in tables to break properly on mobile */
  article table code {
    @apply break-words hyphens-manual;
    white-space: normal !important;
    display: inline !important;
    max-width: 100% !important;
    line-height: 1.8 !important;
  }

  /* Remove min-width constraint from tables on mobile */
  article table {
    min-width: auto !important;
  }

  /* Ensure hint images are fully visible on mobile */
  article .hint img {
    max-width: 100%;
    width: auto;
    height: auto !important;
  }

  /* Allow page actions dropdown to overflow on mobile */
  #page-actions-dropdown,
  #page-actions-dropdown.absolute {
    overflow: visible !important;
  }

  /* Allow dropdown parent containers to overflow */
  .overflow-visible {
    overflow: visible !important;
  }
}

/* Custom scrollbar for navigation and search dropdown */
#navigation::-webkit-scrollbar,
#meilisearch-dropdown::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

#navigation::-webkit-scrollbar-track,
#meilisearch-dropdown::-webkit-scrollbar-track {
  background: transparent;
}

#navigation::-webkit-scrollbar-thumb,
#meilisearch-dropdown::-webkit-scrollbar-thumb {
  background: transparent;
  background-clip: content-box;
  border: 1px solid transparent;
  border-radius: 20px;
  transition: background 0.3s ease;
}

#navigation:hover::-webkit-scrollbar-thumb,
#meilisearch-dropdown:hover::-webkit-scrollbar-thumb {
  background: var(--color-outline-hover);
}

#navigation::-webkit-scrollbar-thumb:active,
#meilisearch-dropdown::-webkit-scrollbar-thumb:active {
  background: var(--color-outline-hover);
}

#navigation::-webkit-scrollbar-corner,
#meilisearch-dropdown::-webkit-scrollbar-corner {
  background: transparent;
}

/* Hide thead when data-header-hidden is true */
[data-header-hidden="true"] thead {
  display: none;
}

.mermaid-container {
  padding: 16px 0;
}

/* Add spacing between consecutive elements of the same type */
article .code-gitbook+.code-gitbook,
article .big-link+.big-link {
  @apply mt-4;
}

/* Add spacing between consecutive markdown-code blocks that are direct siblings */
article pre.markdown-code+pre.markdown-code {
  margin-top: 1rem !important;
}

/* Navigation chevron rotation */
.nav-item .nav-chevron {
  transform: rotate(0deg);
  transition: transform 200ms ease-in-out;
}

.nav-item.open > .nav-summary .nav-chevron {
  transform: rotate(90deg);
}

/* Tab widget styles */
[data-tab-container] button[data-tab] {
  @apply border-transparent text-on-surface-placeholder;
}

[data-tab-container] button[data-tab]:not(.tab-active):hover {
  @apply text-on-surface-muted;
}

[data-tab-container] button[data-tab].tab-active {
  @apply border-brand text-brand;
}

/* Filter checkbox styles - matching Figma design */
.filter-checkbox {
  appearance: none;
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid #808592;
  border-radius: 2.5px;
  background-color: transparent;
  cursor: pointer;
  position: relative;
  flex-shrink: 0;
}

.filter-checkbox:checked {
  background-color: var(--color-tag-language-bg);
  border-color: var(--color-tag-language-bg);
}

.filter-checkbox:checked::after {
  content: '';
  position: absolute;
  left: 4px;
  top: 1px;
  width: 5px;
  height: 9px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.filter-checkbox:focus {
  outline: 2px solid var(--color-tag-language-bg);
  outline-offset: 2px;
}

/* ================================================
   FHIR Structure Table Styles
   ================================================ */

/* Striped rows */
table.fhir-structure tr:nth-child(even) {
  background-color: var(--color-surface-alt);
}

/* Hover effect for rows */
table.fhir-structure tbody.tree > tr:hover {
  background-color: var(--color-surface-hover) !important;
}

/* Remove internal borders from table cells */
table.fhir-structure td,
table.fhir-structure th {
  border: none;
}

/* Tree structure base */
tbody.tree,
tbody.tree tbody {
  list-style: none;
  margin: 0;
  padding: 0;
}

/* Force table and tr to allow children to stretch full height */
table.fhir-structure {
  height: 1px;
}

table.fhir-structure tbody.tree tr {
  height: 100%;
}

table.fhir-structure tbody.tree tr td {
  height: 100%;
}

/* Vertical dotted lines for tree structure */
tbody.tree .li {
  margin: 0px 0 -10px 10px;
  padding: 0 7px;
  line-height: 20px;
  font-family: Inter;
  border-left: 1px dotted var(--color-outline-tree);
}

/* Last line should only be half height */
tbody.tree .li.last-li {
  height: 50% !important;
  align-self: flex-start !important;
}

tbody.tree li:last-child {
  border-left: none;
}

/* Horizontal connectors at the end of branches */
tbody.tree > tr > td > .element > span:last-child:before {
  position: relative;
  top: 0.3em;
  height: 1em;
  width: 12px;
  color: white;
  border-bottom: 1px dotted var(--color-outline-tree);
  content: '';
  display: inline-block;
  left: -7px;
}

/* Search dropdown - hide border of next sibling when hovering */
.peer:hover + .peer {
  border-top-color: transparent !important;
}

/* Copy code button */
.copy-code-btn {
  @apply absolute top-1 right-2 px-2 py-1 text-xs font-medium;
  @apply bg-surface-alt text-on-surface-placeholder;
  @apply border border-outline rounded;
  @apply cursor-pointer opacity-0 transition-opacity z-10;
  font-family: "Inter", sans-serif;
  display: none;
}

/* Theme toggle */
.theme-toggle {
  @apply flex items-center gap-0.5 p-1 rounded-lg;
}

.theme-toggle button {
  @apply relative p-2 rounded-md transition-colors cursor-pointer;
  color: rgb(95, 114, 121);
}

.theme-toggle button:hover {
  @apply bg-surface-hover;
  color: rgb(24, 30, 33);
}

.theme-toggle button.active {
  background: rgb(240, 249, 252);
  color: rgb(24, 30, 33);
}

/* Theme toggle tooltip */
.theme-toggle button .theme-tooltip {
  @apply absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1;
  @apply bg-on-surface-strong text-surface text-xs rounded whitespace-nowrap;
  @apply opacity-0 invisible transition-all duration-150 pointer-events-none z-50;
}

.theme-toggle button:hover .theme-tooltip {
  @apply opacity-100 visible;
}

/* Desktop: show fixed toggle */
#theme-toggle-fixed {
  @apply hidden lg:flex fixed bottom-2 right-8 z-50;
}

/* Mobile: hide fixed, show in footer */
#theme-toggle-footer {
  @apply flex lg:hidden;
}
